
RewriteEngine On
RewriteBase /
# Redirect home page to keep search engine ranking
#RewriteRule ^$					http://www.mapserver.org/ [R=301,L]

RewriteRule ^$                   en/    [PT]
RewriteRule ^([^/]{3,}.*)          en/$1   [PT]

RewriteRule ^License				http://www.mapserver.org/copyright.html [R=301,L]
#RewriteRule ^download				http://www.mapserver.org/download.html [R=301,L]
#RewriteRule ^community				http://www.mapserver.org/community/ [R=301,L]
RewriteRule ^new_users				http://www.mapserver.org/introduction.html [R=301,L]
RewriteRule ^docs/tutorial			http://www.mapserver.org/introduction.html#tutorial [R=301,L]

#RewriteRule ^development/rfc/ms-rfc-(.*)/	http://www.mapserver.org/development/rfc/ms-rfc-$1.html [R=301,L]
#RewriteRule ^development/rfc/ms-rfc-(.*)	http://www.mapserver.org/development/rfc/ms-rfc-$1.html [R=301,L]
#RewriteRule ^development/rfc/			http://www.mapserver.org/development/rfc/ [R=301,L]
# Catch-all for development, must come last
#RewriteRule ^development			http://www.mapserver.org/development/ [R=301,L]

RewriteRule ^docs/reference/mapfile		http://www.mapserver.org/mapfile/ [R=301,L]
RewriteRule ^docs/reference/cgi			http://www.mapserver.org/cgi/ [R=301,L]
RewriteRule ^docs/reference/php-mapscript-class	http://www.mapserver.org/mapscript/php/ [R=301,L]
RewriteRule ^docs/reference/mapscript		http://www.mapserver.org/mapscript/ [R=301,L]
RewriteRule ^docs/reference/symbology/examples	http://www.mapserver.org/mapfile/symbology/examples.html [R=301,L]
RewriteRule ^docs/reference/symbology		http://www.mapserver.org/mapfile/symbol.html [R=301,L]
RewriteRule ^docs/reference/templatereference	http://www.mapserver.org/mapfile/template.html [R=301,L]
RewriteRule ^docs/reference/utilityreference	http://www.mapserver.org/utilities/ [R=301,L]
RewriteRule ^docs/reference/vector_data		http://www.mapserver.org/input/vector/ [R=301,L]
RewriteRule ^docs/reference/systemmanage	http://www.mapserver.org/utilities/manage.html [R=301,L]
RewriteRule ^docs/howto/fastcgi			http://www.mapserver.org/optimization/fastcgi.html [R=301,L]
RewriteRule ^docs/howto/html_legend		http://www.mapserver.org/output/html_legend.html [R=301,L]
RewriteRule ^docs/howto/ogr_howto		http://www.mapserver.org/input/vector/ogr.html [R=301,L]
RewriteRule ^docs/howto/ogrmysql		http://www.mapserver.org/input/vector/mysql.html [R=301,L]
RewriteRule ^docs/howto/raster_data		http://www.mapserver.org/input/raster.html [R=301,L]
RewriteRule ^docs/howto/optimizevector		http://www.mapserver.org/optimization/vector.html [R=301,L]
RewriteRule ^docs/howto/optimizeraster		http://www.mapserver.org/optimization/raster.html [R=301,L]
RewriteRule ^docs/howto/cartosymbols		http://www.mapserver.org/mapfile/symbology/construction.html [R=301,L]
RewriteRule ^docs/howto/tileindex		http://www.mapserver.org/optimization/tileindex.html [R=301,L]
RewriteRule ^docs/howto/msexpressions		http://www.mapserver.org/mapfile/expressions.html [R=301,L]
RewriteRule ^docs/howto/pdf-output		http://www.mapserver.org/output/pdf.html [R=301,L]
RewriteRule ^docs/howto/imagemaps		http://www.mapserver.org/output/imagemaps.html [R=301,L]
RewriteRule ^docs/howto/mapfiletuning		http://www.mapserver.org/optimization/mapfile.html [R=301,L]
RewriteRule ^docs/howto/antialias		http://www.mapserver.org/output/antialias.html [R=301,L]
RewriteRule ^docs/howto/dynamic-charting	http://www.mapserver.org/output/dynamic_charting.html [R=301,L]
RewriteRule ^docs/howto/agg-rendering-specifics	http://www.mapserver.org/output/agg.html [R=301,L]
RewriteRule ^docs/howto/flash_output		http://www.mapserver.org/output/flash.html [R=301,L]
RewriteRule ^docs/howto/mapscript_imagery	http://www.mapserver.org/mapscript/imagery.html [R=301,L]
RewriteRule ^docs/howto/mapscript_map_config	http://www.mapserver.org/mapscript/mapfile.html [R=301,L]
RewriteRule ^docs/howto/phpmapscript-byexample	http://www.mapserver.org/mapscript/php/by_example.html [R=301,L]
RewriteRule ^docs/howto/mapscript_querying	http://www.mapserver.org/mapscript/querying.html [R=301,L]
RewriteRule ^docs/howto/wxs_mapscript		http://www.mapserver.org/ogc/mapscript.html [R=301,L]
RewriteRule ^docs/howto/filterencoding		http://www.mapserver.org/ogc/filter_encoding.html [R=301,L]
RewriteRule ^docs/howto/mapcontext		http://www.mapserver.org/ogc/mapcontext.html [R=301,L]
RewriteRule ^docs/howto/svg-howto		http://www.mapserver.org/output/svg.html [R=301,L]
RewriteRule ^docs/howto/sos_server		http://www.mapserver.org/ogc/sos_server.html [R=301,L]
RewriteRule ^docs/howto/sldhowto		http://www.mapserver.org/ogc/sld.html [R=301,L]
RewriteRule ^docs/howto/wcs_server		http://www.mapserver.org/ogc/wcs_server.html [R=301,L]
RewriteRule ^docs/howto/wms_server		http://www.mapserver.org/ogc/wms_server.html [R=301,L]
RewriteRule ^docs/howto/wms_client		http://www.mapserver.org/ogc/wms_client.html [R=301,L]
RewriteRule ^docs/howto/wms_time_support	http://www.mapserver.org/ogc/wms_time.html [R=301,L]
RewriteRule ^docs/howto/wfs_server		http://www.mapserver.org/ogc/wfs_server.html [R=301,L]
RewriteRule ^docs/howto/wfs_client		http://www.mapserver.org/ogc/wfs_client.html [R=301,L]
RewriteRule ^docs/error		http://www.mapserver.org/errors.html [R=301,L]
# Catch-all for docs, must come last
RewriteRule ^docs				http://www.mapserver.org/documentation.html [R=301,L]

RewriteRule ^download/current http://www.mapserver.org/download.html [R=301,L]
RewriteRule ^download/current/windows http://www.mapserver.org/download#id3 [R=301,L]

## The following rules should handle the new structure of the docs
## the current URLs for the English docs stay the same, while alle other
## languages are served from sub-directories (de/, fr/ ...)

# Rules to handle multi lingual docs
#RewriteCond $1 !^en/
# we rewrite only the "English-URLs", please add more here when they are available
#RewriteCond $1 !^(_static|de)/
#RewriteRule (.*) /en/$1 [L]

# mod_expires stuff
ExpiresByType image/* "modification plus 12 hours"
ExpiresByType application/javascript "modification plus 12 hours"
ExpiresByType application/x-javascript "modification plus 12 hours"
ExpiresByType text/html "modification plus 1 hours"

# deflate html and javascript
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript
